#!/usr/bin/env sh
set -e

# -------------------------------------------------------------- description ---
#
# cross-platform pbpaste shim for macos and wsl
#
# ------------------------------------------------------------------- script ---

if [ "$(uname -s)" = "Darwin" ]; then
  /usr/bin/pbpaste "$@"
elif grep -qi microsoft /proc/version 2>/dev/null || [ -n "$WSL_DISTRO_NAME" ]; then
  # Use xclip if available, fallback to powershell
  if command -v xclip >/dev/null 2>&1; then
    xclip -selection clipboard -o "$@"
  elif command -v win32yank.exe >/dev/null 2>&1; then
    win32yank.exe -o --lf
  else
    powershell.exe -c 'Get-Clipboard' | tr -d '\r'
  fi
fi
